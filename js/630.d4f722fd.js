"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[630],{1325:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},9630:function(t,e,i){i.r(e),i.d(e,{default:function(){return j}});var a=i(3396),s=i(7139);const o=t=>((0,a.dD)("data-v-4c6c4986"),t=t(),(0,a.Cn)(),t),r=o((()=>(0,a._)("div",{class:"position-relative bg-cover"},[(0,a._)("div",{class:"favoritebanner"},[(0,a._)("h2",{class:"position-absolute h2 fw-bold favoritebanner-text"},"喜愛清單")])],-1))),c={key:0,class:"container mt-4 h100"},l={class:"table table-striped table-hover align-middle"},d=o((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"text-center align-middle bgcolor"},[(0,a._)("th",{scope:"col",class:"d-none d-sm-block border-bottom-0"}),(0,a._)("th",{scope:"col"},"名稱"),(0,a._)("th",{scope:"col"},"金額"),(0,a._)("th",{scope:"col"},"加入購物車"),(0,a._)("th",{scope:"col"},"刪除")])],-1))),n={class:"align-middle text-center"},u={class:"align-middle d-none d-sm-block"},h=["src","alt","title"],g={class:"align-middle h4 fw-bold"},p={class:"align-middle"},v={key:0,class:"fs-5 m-0 fw-bold"},m={key:1,class:"text-danger fw-bold m-0 fs-5"},b={key:2,class:"text-decoration-line-through m-0 text-muted fs-6"},f={class:"align-middle"},_=["onClick"],k=o((()=>(0,a._)("i",{class:"bi bi-cart-plus-fill h4"},null,-1))),y=[k],w={class:"align-middle"},x=["onClick"],F=o((()=>(0,a._)("i",{class:"bi bi-trash h4"},null,-1))),$=[F],S={key:1,class:"container-fluid d-flex justify-content-center align-items-center h100"},P={class:"text-center"},C=o((()=>(0,a._)("i",{class:"bi bi-bag-heart display-1 fw-bold text-dark"},null,-1))),D=o((()=>(0,a._)("h3",{class:"p-3"},"目前喜愛清單還沒有商品唷",-1))),L=(0,a.Uk)("來去逛逛");function I(t,e,i,o,k,F){const I=(0,a.up)("Loading"),q=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{active:k.isLoading},null,8,["active"]),r,k.favoriteProduct.length?((0,a.wg)(),(0,a.iD)("div",c,[(0,a._)("table",l,[d,(0,a._)("tbody",n,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.favoriteProduct,(t=>((0,a.wg)(),(0,a.iD)("tr",{class:"align-middle",key:t.id},[(0,a._)("td",u,[(0,a._)("img",{class:"productImg",src:t.imageUrl,alt:t.title,title:t.title},null,8,h)]),(0,a._)("td",g,(0,s.zw)(t.title),1),(0,a._)("td",p,[t.price==t.origin_price?((0,a.wg)(),(0,a.iD)("p",v,"$"+(0,s.zw)(F.currency(t.origin_price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",m," $"+(0,s.zw)(F.currency(t.price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",b," $"+(0,s.zw)(F.currency(t.origin_price)),1)):(0,a.kq)("",!0)]),(0,a._)("td",f,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:e=>F.addToCart(t.id,1)},y,8,_)]),(0,a._)("td",w,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:e=>F.removeFavorite(t)},$,8,x)])])))),128))])])])):((0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",P,[C,D,(0,a.Wm)(q,{to:"/product",class:"btn btn-outline-dark btn-lg mb-5"},{default:(0,a.w5)((()=>[L])),_:1})])]))],64)}i(6699);var q=i(1325),M=i(3714),Z={data(){return{favorite:q.Z.getFavorite()||[],favoriteProduct:[],isLoading:!1,status:{loadingItem:""}}},inject:["$httpMessageState","emitter"],methods:{currency:M.A,getFavoriteProduct(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/api/yuanyuan1103/products/all").then((t=>{this.isLoading=!1,this.favoriteProduct=t.data.products.filter((t=>this.favorite.includes(t.id)))})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},`已將 ${t.title} 移除喜愛清單`),q.Z.saveFavorite(this.favorite),this.emitter.emit("update-favorite"),this.isLoading=!1,this.getFavoriteProduct()},updateFavorite(){this.favorite=q.Z.getFavorite()},addToCart(t,e){const i="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart",a={product_id:t,qty:e};this.status.loadingItem=t,this.$http.post(i,{data:a}).then((e=>{this.status.loadingItem="",this.qty=1,this.emitter.emit("update-cart",t),this.$httpMessageState(e,` ${e.data.data.product.title}加入購物車 `)})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},created(){this.getFavoriteProduct()},mounted(){this.emitter.on("update-favorite",this.updateFavorite),this.getFavoriteProduct()}},z=i(89);const O=(0,z.Z)(Z,[["render",I],["__scopeId","data-v-4c6c4986"]]);var j=O}}]);
//# sourceMappingURL=630.d4f722fd.js.map