"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[453],{8078:function(t,e,a){a.d(e,{w:function(){return i}});const i=[{value:void 0,label:"全部產品",imgUrl:""},{value:"原聲帶",label:"原聲帶",imgUrl:a(1387)},{value:"古典",label:"古典",imgUrl:a(6520)},{value:"演奏",label:"演奏",imgUrl:a(1953)},{value:"其他",label:"其他",imgUrl:a(464)}]},1325:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},8233:function(t,e,a){a.d(e,{Z:function(){return h}});var i=a(3396),s=a(7139),r=a(9242);const l={"aria-label":"Page navigation"},c={class:"pagination justify-content-end pt-4"},o=["onClick"],n={"aria-hidden":"true"};function g(t,e,a,g,p,u){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",l,[(0,i._)("ul",c,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:1==a.pages.current_page}])},[(0,i._)("a",{class:"page-link",onClick:e[0]||(e[0]=(0,r.iM)((t=>u.updatePage(a.pages.current_page-1)),["prevent"]))},[(0,i._)("i",{class:(0,s.C_)([1==a.pages.current_page?"bi-caret-left-fill":"bi-caret-left","bi"])},null,2)])],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,s.C_)(["page-item",{active:a.pages.current_page==t}])},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,r.iM)((e=>u.updatePage(t)),["prevent"])},(0,s.zw)(t),9,o)],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:a.pages.current_page==a.pages.total_pages}])},[(0,i._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,r.iM)((t=>u.updatePage(a.pages.current_page+1)),["prevent"]))},[(0,i._)("span",n,[(0,i._)("i",{class:(0,s.C_)([a.pages.current_page==a.pages.total_pages?"bi-caret-right-fill":"bi-caret-right","bi"])},null,2)])])],2)])])])}var p={props:{pages:{type:Object,default:()=>({total_pages:1,current_page:1,has_pre:!1,has_next:!1})}},methods:{updatePage(t){this.$emit("emit-pages",t)}}},u=a(89);const d=(0,u.Z)(p,[["render",g]]);var h=d},4453:function(t,e,a){a.r(e),a.d(e,{default:function(){return J}});a(6699);var i=a(3396),s=a(7139),r=a(9242);const l=t=>((0,i.dD)("data-v-b2a354fc"),t=t(),(0,i.Cn)(),t),c={class:"cart"},o=l((()=>(0,i._)("div",{class:"box"},null,-1))),n={class:"container pt-3"},g={class:"row justify-content-center"},p={class:"col-12 col-md-3 p-3 categoryList"},u={class:"list-group list-group-flush flex-md-column flex-row align-items-end"},d=["onClick"],h={class:"writingMode"},v={class:"col-10 col-md-9 productList"},_={class:"form-floating mb-2"},f=l((()=>(0,i._)("label",{for:"search"},"search",-1))),m={class:"row justify-content-center",style:{"min-height":"70vh"}},y=["onClick"],b={class:"imgProduct"},C=l((()=>(0,i._)("i",{class:"bi bi-search"},null,-1))),k=[C],w=["src","alt","title"],P={class:"pt-2 fs-5 textover"},$={class:"proDetil pb-3"},x={class:"proBtn"},L=["onClick","disabled"],M=l((()=>(0,i._)("i",{class:"bi bi-cart"},null,-1))),S=[M],D=["onClick"],U={class:"proTitle"},j={key:0,class:"text-decoration-line-through text-muted fs-6"},z={key:1,class:"text-light fs-6"},F={class:"fs-4"},I=l((()=>(0,i._)("div",{class:"col-10 col-md-6 col-lg-4"},null,-1))),Z=l((()=>(0,i._)("div",{class:"col-10 col-md-6 col-lg-4"},null,-1)));function q(t,e,a,l,C,M){const q=(0,i.up)("Loading"),H=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(q,{active:C.isLoading},null,8,["active"]),(0,i._)("div",c,[o,(0,i._)("div",n,[(0,i._)("div",g,[(0,i._)("div",p,[(0,i._)("div",u,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.categoryList,(t=>((0,i.wg)(),(0,i.iD)("button",{type:"button",class:(0,s.C_)(["listCategory",{listCategoryActive:t.value===this.category}]),key:t.value,onClick:e=>M.replaceUrlQuery("category",t.value)},[(0,i._)("span",h,[(0,i._)("i",{class:(0,s.C_)([t.value===this.category?"bi-music-note-list":"","bi"])},null,2),(0,i.Uk)((0,s.zw)(t.label),1)])],10,d)))),128))])]),(0,i._)("div",v,[(0,i._)("div",_,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>C.search=t),type:"text",class:"form-control",id:"search",placeholder:"search"},null,512),[[r.nr,C.search]]),f]),(0,i._)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(M.slicePage,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"col-10 col-md-6 col-lg-4 pb-5"},[(0,i._)("div",{class:"product",onClick:e=>M.getProduct(t.id)},[(0,i._)("div",b,[(0,i._)("a",{href:"#",onClick:e[1]||(e[1]=(0,r.iM)((()=>{}),["prevent"]))},k),(0,i._)("img",{class:"card-img-top",src:t.imageUrl,alt:t.title,title:t.title},null,8,w)]),(0,i._)("p",P,(0,s.zw)(t.title),1),(0,i._)("div",$,[(0,i._)("div",x,[(0,i._)("button",{type:"button",onClick:(0,r.iM)((e=>M.addToCart(t.id,1)),["stop"]),class:"btn colorCart me-2",disabled:this.status.loadingItem===t.id},S,8,L),(0,i._)("button",{type:"button",onClick:(0,r.iM)((e=>M.toggleFavorite(t)),["stop"]),class:"btn btn-favorite colorHeart"},[(0,i._)("i",{class:(0,s.C_)(["bi",C.favorite.includes(t.id)?"bi-heart-fill":"bi-heart"])},null,2)],8,D)]),(0,i._)("div",U,[t.price!=t.origin_price?((0,i.wg)(),(0,i.iD)("span",j,"$"+(0,s.zw)(M.currency(t.origin_price)),1)):(0,i.kq)("",!0),t.price==t.origin_price?((0,i.wg)(),(0,i.iD)("span",z,".")):(0,i.kq)("",!0),(0,i._)("span",F,"$"+(0,s.zw)(M.currency(t.price)),1)])])],8,y)])))),128)),I,Z])]),(0,i.Wm)(H,{pages:{total_pages:M.totalPages,current_page:this.page},onEmitPages:e[2]||(e[2]=t=>M.replaceUrlQuery("page",t))},null,8,["pages"])])])])],64)}var H=a(8078),O=a(8233),Y=a(1325),K=a(3714),Q={data(){return{categoryList:H.w,products:[],page:1,search:"",category:"",pageSize:6,favorite:Y.Z.getFavorite()||[],isLoading:!1,status:{loadingItem:""},hover:!1}},components:{Pagination:O.Z},inject:["$httpMessageState","emitter"],methods:{currency:K.A,getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/api/yuanyuan1103/products/all").then((t=>{this.products=t.data.products,this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},updateData(t,e){this[t]=e},replaceUrlQuery(t,e){const a={...this.$route.query};a[t]=e,"category"===t&&(a.page=1),this.$router.replace({query:a})},toggleFavorite(t){this.isLoading=!0,this.favorite.includes(t.id)?(this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},`已將 ${t.title} 移除喜愛清單`),this.isLoading=!1):(this.favorite.push(t.id),this.$httpMessageState({data:{success:!0}},`已將 ${t.title} 加入喜愛清單`),this.isLoading=!1),Y.Z.saveFavorite(this.favorite),this.emitter.emit("update-favorite",this.favorite)},updateFavorite(){this.favorite=Y.Z.getFavorite()},getProduct(t){this.$router.push({path:`/product/${t}`,params:{}})},addToCart(t,e){this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart",i={product_id:t,qty:e};this.status.loadingItem=t,this.$http.post(a,{data:i}).then((e=>{this.isLoading=!1,this.status.loadingItem="",this.qty=1,this.emitter.emit("update-cart",t),this.$httpMessageState(e,` ${e.data.data.product.title}加入購物車 `)})).catch((t=>{this.$httpMessageState(t,"連線錯誤"),this.isLoading=!1}))}},created(){this.getProducts()},watch:{"$route.query":{immediate:!0,handler(t){const{page:e,search:a,category:i}=t;this.page=parseInt(e,10)||1,this.search=a,this.category=i}}},computed:{filterProducts(){let t=this.products;return this.search&&(t=t.filter((t=>t.title.match(this.search)))),this.category&&(t=t.filter((t=>t.category===this.category))),t},slicePage(){let t=this.filterProducts;const e=this.pageSize*(this.page-1),a=e+this.pageSize;return t=t.slice(e,a),t},totalPages(){const t=this.filterProducts.length;return Math.ceil(t/this.pageSize)}}},T=a(89);const A=(0,T.Z)(Q,[["render",q],["__scopeId","data-v-b2a354fc"]]);var J=A},1387:function(t,e,a){t.exports=a.p+"img/category_1.d0be3c97.jpg"},6520:function(t,e,a){t.exports=a.p+"img/category_2.1cef3761.jpg"},1953:function(t,e,a){t.exports=a.p+"img/category_3.72bd652a.jpg"},464:function(t,e,a){t.exports=a.p+"img/category_4.67adc8a6.jpg"}}]);
//# sourceMappingURL=453.58a0179b.js.map