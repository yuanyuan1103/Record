"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[927],{1325:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},2927:function(t,e,i){i.r(e),i.d(e,{default:function(){return H}});var a=i(3396),s=i(7139),o=i(9242);const r=t=>((0,a.dD)("data-v-a7a2d4a8"),t=t(),(0,a.Cn)(),t),c=r((()=>(0,a._)("div",{class:"position-relative bg-cover"},[(0,a._)("div",{class:"favoritebanner"},[(0,a._)("h2",{class:"position-absolute h2 fw-bold favoritebanner-text"},"喜愛清單")])],-1))),l={key:0,class:"container mt-4 h100"},d={class:"table table-striped table-hover align-middle"},n=r((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"text-center align-middle bgcolor"},[(0,a._)("th",{scope:"col",class:"d-none d-sm-block border-bottom-0"}),(0,a._)("th",{scope:"col"},"名稱"),(0,a._)("th",{scope:"col"},"金額"),(0,a._)("th",{scope:"col"},"加入購物車"),(0,a._)("th",{scope:"col"},"刪除")])],-1))),u={class:"align-middle text-center"},h={class:"align-middle d-none d-sm-block"},g=["src","alt","title"],p={class:"align-middle h4 fw-bold"},v={class:"align-middle"},m={key:0,class:"fs-5 m-0 fw-bold"},b={key:1,class:"text-danger fw-bold m-0 fs-5"},f={key:2,class:"text-decoration-line-through m-0 text-muted fs-6"},_={class:"align-middle"},k=["onClick"],y=r((()=>(0,a._)("i",{class:"bi bi-cart-plus-fill h4"},null,-1))),w=[y],x={class:"align-middle"},F=["onClick"],S=r((()=>(0,a._)("i",{class:"bi bi-trash h4"},null,-1))),$=[S],P={key:1,class:"container-fluid d-flex justify-content-center align-items-center h100"},C={class:"text-center"},D=r((()=>(0,a._)("i",{class:"bi bi-bag-heart display-1 fw-bold text-dark"},null,-1))),L=r((()=>(0,a._)("h3",{class:"p-3"},"目前喜愛清單還沒有商品唷",-1))),M=(0,a.Uk)("來去逛逛");function I(t,e,i,r,y,S){const I=(0,a.up)("Loading"),q=(0,a.up)("router-link");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(I,{active:y.isLoading},null,8,["active"]),c,y.favoriteProduct.length?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("table",d,[n,(0,a._)("tbody",u,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.favoriteProduct,(t=>((0,a.wg)(),(0,a.iD)("tr",{class:"align-middle",key:t.id},[(0,a._)("td",h,[(0,a._)("img",{class:"productImg",src:t.imageUrl,alt:t.title,title:t.title},null,8,g)]),(0,a._)("td",p,(0,s.zw)(t.title),1),(0,a._)("td",v,[t.price==t.origin_price?((0,a.wg)(),(0,a.iD)("p",m,"$"+(0,s.zw)(S.currency(t.origin_price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",b," $"+(0,s.zw)(S.currency(t.price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",f," $"+(0,s.zw)(S.currency(t.origin_price)),1)):(0,a.kq)("",!0)]),(0,a._)("td",_,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:(0,o.iM)((e=>S.addToCart(t.id,1)),["prevent"])},w,8,k)]),(0,a._)("td",x,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:(0,o.iM)((e=>S.removeFavorite(t.id)),["prevent"])},$,8,F)])])))),128))])])])):((0,a.wg)(),(0,a.iD)("div",P,[(0,a._)("div",C,[D,L,(0,a.Wm)(q,{to:"/product",class:"btn btn-outline-dark btn-lg mb-5"},{default:(0,a.w5)((()=>[M])),_:1})])]))],64)}i(6699);var q=i(1325),Z=i(3714),z={data(){return{favorite:q.Z.getFavorite()||[],favoriteProduct:[],isLoading:!1,status:{loadingItem:""}}},inject:["$httpMessageState","emitter"],methods:{currency:Z.A,getFavoriteProduct(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/api/yuanyuan1103/products/all").then((t=>{if(!t.data.success)return this.$httpMessageState(t,"取得全部產品資料"),void(this.isLoading=!1);this.isLoading=!1,this.favoriteProduct=t.data.products.filter((t=>this.favorite.includes(t.id)))})).catch((t=>{this.isLoading=!1,this.$httpMessageState(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.favorite.splice(this.favorite.indexOf(t),1),this.$httpMessageState({data:{success:!0,message:`已將 ${t.title} 移除收藏`}},"移除收藏"),q.Z.saveFavorite(this.favorite),this.emitter.emit("update-favorite"),this.isLoading=!1,this.getFavoriteProduct()},updateFavorite(){this.favorite=q.Z.getFavorite()},addToCart(t,e){const i="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart",a={product_id:t,qty:e};this.status.loadingItem=t,this.$http.post(i,{data:a}).then((e=>{e.data.success?(this.status.loadingItem="",this.qty=1,this.emitter.emit("update-cart",t),this.$httpMessageState(e,"加入購物車")):this.$httpMessageState(e,"加入購物車")})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},created(){this.getFavoriteProduct()},mounted(){this.emitter.on("update-favorite",this.updateFavorite),this.getFavoriteProduct()}},O=i(89);const j=(0,O.Z)(z,[["render",I],["__scopeId","data-v-a7a2d4a8"]]);var H=j}}]);
//# sourceMappingURL=927.d0cf3805.js.map