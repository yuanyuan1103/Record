"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[50],{8078:function(t,e,a){a.d(e,{w:function(){return i}});const i=[{value:void 0,label:"全部產品",imgUrl:""},{value:"原聲帶",label:"原聲帶",imgUrl:"https://images.unsplash.com/photo-1518401543587-7bf7a1f74e66?ixlib=rb-1.2.1&raw_url=true&q=80&fm=jpg&crop=entropy&cs=tinysrgb&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470"},{value:"古典",label:"古典",imgUrl:"https://images.unsplash.com/photo-1567517849576-ae9432e1a03e?ixlib=rb-1.2.1&raw_url=true&q=80&fm=jpg&crop=entropy&cs=tinysrgb&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1471"},{value:"演奏",label:"演奏",imgUrl:"https://images.unsplash.com/photo-1601066525716-3cca33c6d4c6?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470"},{value:"其他",label:"其他",imgUrl:"https://images.unsplash.com/photo-1526269982786-96fcd6b53d45?crop=entropy&cs=tinysrgb&fm=jpg&ixlib=rb-1.2.1&q=80&raw_url=true&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1470"}]},1325:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},9998:function(t,e,a){a.d(e,{Z:function(){return h}});var i=a(3396),s=a(7139),r=a(9242);const o={"aria-label":"Page navigation"},c={class:"pagination justify-content-end pt-4"},l=["onClick"],n={"aria-hidden":"true"};function p(t,e,a,p,u,g){return(0,i.wg)(),(0,i.iD)("div",null,[(0,i._)("nav",o,[(0,i._)("ul",c,[(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:1==a.pages.current_page}])},[(0,i._)("a",{class:"page-link",onClick:e[0]||(e[0]=(0,r.iM)((t=>g.updatePage(a.pages.current_page-1)),["prevent"]))},[(0,i._)("i",{class:(0,s.C_)([1==a.pages.current_page?"bi-caret-left-fill":"bi-caret-left","bi"])},null,2)])],2),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(a.pages.total_pages,(t=>((0,i.wg)(),(0,i.iD)("li",{key:t,class:(0,s.C_)(["page-item",{active:a.pages.current_page==t}])},[(0,i._)("a",{class:"page-link",href:"#",onClick:(0,r.iM)((e=>g.updatePage(t)),["prevent"])},(0,s.zw)(t),9,l)],2)))),128)),(0,i._)("li",{class:(0,s.C_)(["page-item",{disabled:a.pages.current_page==a.pages.total_pages}])},[(0,i._)("a",{class:"page-link",href:"#",onClick:e[1]||(e[1]=(0,r.iM)((t=>g.updatePage(a.pages.current_page+1)),["prevent"]))},[(0,i._)("span",n,[(0,i._)("i",{class:(0,s.C_)([a.pages.current_page==a.pages.total_pages?"bi-caret-right-fill":"bi-caret-right","bi"])},null,2)])])],2)])])])}var u={props:{pages:{type:Object,default:()=>({total_pages:1,current_page:1,has_pre:!1,has_next:!1})}},watch:{},methods:{updatePage(t){this.$emit("emit-pages",t)}}},g=a(89);const d=(0,g.Z)(u,[["render",p]]);var h=d},1050:function(t,e,a){a.r(e),a.d(e,{default:function(){return A}});a(6699);var i=a(3396),s=a(7139),r=a(9242);const o=t=>((0,i.dD)("data-v-4ac6a7f8"),t=t(),(0,i.Cn)(),t),c={class:"cart"},l=o((()=>(0,i._)("div",{class:"box"},null,-1))),n={class:"container"},p={class:"row justify-content-center"},u={class:"col-12 col-md-3 p-3 categoryList"},g={class:"list-group list-group-flush flex-md-column flex-row"},d=["onClick"],h={class:"col-12 col-md-9 productList"},f={class:"form-floating mb-2"},v=o((()=>(0,i._)("label",{for:"search"},"search",-1))),_={class:"row",style:{"min-height":"70vh"}},m={class:"product"},b=["onClick"],y=o((()=>(0,i._)("i",{class:"bi bi-search"},null,-1))),w=[y],x=["src"],k={class:"pt-2 fs-3 textover"},C={class:"proDetil pb-3"},M={class:"proBtn"},D=["onClick","disabled"],P=o((()=>(0,i._)("i",{class:"bi bi-cart"},null,-1))),$=[P],H=["onClick"],L={class:"proTitle"},S={key:0,class:"text-decoration-line-through text-muted fs-6"},j={key:1,class:"text-light fs-6"},q={class:"fs-4"};function U(t,e,a,o,y,P){const U=(0,i.up)("Loading"),z=(0,i.up)("Pagination");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(U,{active:y.isLoading},null,8,["active"]),(0,i._)("div",c,[l,(0,i._)("div",n,[(0,i._)("div",p,[(0,i._)("div",u,[(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(y.categoryList,(t=>((0,i.wg)(),(0,i.iD)("button",{type:"button",class:(0,s.C_)(["listCategory",{listCategoryActive:t.value===this.category}]),key:t.value,onClick:(0,r.iM)((e=>P.replaceUrlQuery("category",t.value)),["prevent"])},[(0,i._)("i",{class:(0,s.C_)([t.value===this.category?"bi-music-note-list":"","bi"])},null,2),(0,i.Uk)((0,s.zw)(t.label),1)],10,d)))),128))])]),(0,i._)("div",h,[(0,i._)("div",f,[(0,i.wy)((0,i._)("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>y.search=t),type:"text",class:"form-control",id:"search",placeholder:"search"},null,512),[[r.nr,y.search]]),v]),(0,i._)("div",_,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(P.slicePage,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:"col-12 col-md-6 col-lg-4"},[(0,i._)("div",m,[(0,i._)("a",{href:"#",onClick:(0,r.iM)((e=>P.getProduct(t.id)),["prevent"])},w,8,b),(0,i._)("img",{style:{"aspect-ratio":"4/3"},src:t.imageUrl,class:"card-img-top",alt:"..."},null,8,x)]),(0,i._)("p",k,(0,s.zw)(t.title),1),(0,i._)("div",C,[(0,i._)("div",M,[(0,i._)("button",{type:"button",onClick:e=>P.addToCart(t.id,1),class:"btn colorCart border border-dark me-2",disabled:this.status.loadingItem===t.id},$,8,D),(0,i._)("button",{type:"button",onClick:(0,r.iM)((e=>P.toggleFavorite(t)),["stop"]),class:"btn btn-favorite colorHeart border border-dark"},[(0,i._)("i",{class:(0,s.C_)(["bi",y.favorite.includes(t.id)?"bi-heart-fill":"bi-heart"])},null,2)],8,H)]),(0,i._)("div",L,[t.price!=t.origin_price?((0,i.wg)(),(0,i.iD)("span",S,"$"+(0,s.zw)(P.currency(t.origin_price)),1)):(0,i.kq)("",!0),t.price==t.origin_price?((0,i.wg)(),(0,i.iD)("span",j,".")):(0,i.kq)("",!0),(0,i._)("span",q,"$"+(0,s.zw)(P.currency(t.price)),1)])])])))),128))])]),(0,i.Wm)(z,{pages:{total_pages:P.totalPages,current_page:this.page},onEmitPages:e[1]||(e[1]=t=>P.replaceUrlQuery("page",t))},null,8,["pages"])])])])],64)}a(1703);var z=a(8078),B=a(9998),F=a(1325),G=a(3714),I={data(){return{categoryList:z.w,products:[],page:1,search:"",category:"",pageSize:6,favorite:F.Z.getFavorite()||[],isLoading:!1,status:{loadingItem:""},hover:!1}},components:{Pagination:B.Z},inject:["$httpMessageState","emitter"],methods:{currency:G.A,getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/api/yuanyuan1103/products/all").then((t=>{if(!t.data.success)throw new Error(t.data.message);this.products=t.data.products,this.isLoading=!1})).catch((t=>{console.log(t?.message)}))},updateData(t,e){this[t]=e},replaceUrlQuery(t,e){let a={...this.$route.query};a[t]=e,"category"==t&&(a.page=1),this.$router.replace({query:a})},toggleFavorite(t){this.isLoading=!0,this.favorite.includes(t.id)?(this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0,message:`已將 ${t.title} 移除收藏`}},"移除收藏"),this.isLoading=!1):(this.favorite.push(t.id),this.$httpMessageState({data:{success:!0,message:`已將 ${t.title} 加入收藏`}},"加入收藏"),this.isLoading=!1),F.Z.saveFavorite(this.favorite),this.emitter.emit("update-favorite",this.favorite)},updateFavorite(){this.favorite=F.Z.getFavorite()},getProduct(t){this.$router.push({path:`/product/${t}`,params:{}})},addToCart(t,e){this.isLoading=!0;const a="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart",i={product_id:t,qty:e};this.status.loadingItem=t,this.$http.post(a,{data:i}).then((e=>{e.data.success?(this.isLoading=!1,this.status.loadingItem="",this.qty=1,this.emitter.emit("update-cart",t),this.$httpMessageState(e,"加入購物車")):this.$httpMessageState(e,"加入購物車")})).catch((t=>{this.$httpMessageState(t,"連線錯誤"),this.isLoading=!1}))}},created(){this.getProducts()},watch:{"$route.query":{immediate:!0,handler(t){const{page:e,search:a,category:i}=t;this.page=parseInt(e,10)||1,this.search=a,this.category=i}}},computed:{filterProducts(){let t=this.products;return this.search&&(t=t.filter((t=>t.title.match(this.search)))),this.category&&(t=t.filter((t=>t.category===this.category))),t},slicePage(){let t=this.filterProducts;const e=this.pageSize*(this.page-1),a=e+this.pageSize;return t=t.slice(e,a),t},totalPages(){const t=this.filterProducts.length;return Math.ceil(t/this.pageSize)}}},Y=a(89);const Z=(0,Y.Z)(I,[["render",U],["__scopeId","data-v-4ac6a7f8"]]);var A=Z}}]);
//# sourceMappingURL=50.89bb9ad2.js.map