"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[202],{1325:function(t,e){e["Z"]={saveFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteProduct",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteProduct"))}}},6202:function(t,e,i){i.r(e),i.d(e,{default:function(){return N}});var a=i(3396),s=i(7139),o=i(9242);const r=t=>((0,a.dD)("data-v-f79625d2"),t=t(),(0,a.Cn)(),t),c=r((()=>(0,a._)("div",{class:"position-relative bg-cover"},[(0,a._)("div",{class:"collectbanner bg-mask-60"},[(0,a._)("h2",{class:"position-absolute text-hv-center h2 fw-bold text-white-50 pageBanner-text"},"喜愛清單")])],-1))),l={key:0,class:"container mt-4 h100"},d={class:"table table-striped table-hover align-middle"},n=r((()=>(0,a._)("thead",null,[(0,a._)("tr",{class:"text-center align-middle bgcolor"},[(0,a._)("th",{scope:"col",class:"d-none d-sm-block border-bottom-0"}),(0,a._)("th",{scope:"col"},"名稱"),(0,a._)("th",{scope:"col"},"金額"),(0,a._)("th",{scope:"col"},"加入購物車"),(0,a._)("th",{scope:"col"},"刪除")])],-1))),h={class:"align-middle text-center"},u={class:"align-middle d-none d-sm-block"},p=["src"],g={class:"align-middle h4 fw-bold"},v={class:"align-middle"},m={key:0,class:"fs-5 m-0 fw-bold"},b={key:1,class:"text-danger fw-bold m-0 fs-5"},f={key:2,class:"text-decoration-line-through m-0 text-muted fs-6"},_={class:"align-middle"},k=["onClick"],y=r((()=>(0,a._)("i",{class:"bi bi-cart-plus-fill h4"},null,-1))),w=[y],x={class:"align-middle"},S=["onClick"],F=r((()=>(0,a._)("i",{class:"bi bi-trash h4"},null,-1))),$=[F],P={key:1,class:"container-fluid d-flex justify-content-center align-items-center h100"},C=r((()=>(0,a._)("div",{class:"text-center"},[(0,a._)("i",{class:"bi bi-bag-heart display-1 fw-bold text-dark"}),(0,a._)("h3",{class:"p-3"},"目前喜愛清單還沒有商品唷"),(0,a._)("a",{href:"#/product",class:"btn btn-dark btn-lg mb-5"},"Shop Now")],-1))),D=[C];function M(t,e,i,r,y,F){return(0,a.wg)(),(0,a.iD)(a.HY,null,[c,y.favoriteProduct.length?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("table",d,[n,(0,a._)("tbody",h,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.favoriteProduct,(t=>((0,a.wg)(),(0,a.iD)("tr",{class:"align-middle",key:t.id},[(0,a._)("td",u,[(0,a._)("img",{class:"productImg",src:t.imageUrl},null,8,p)]),(0,a._)("td",g,(0,s.zw)(t.title),1),(0,a._)("td",v,[t.price==t.origin_price?((0,a.wg)(),(0,a.iD)("p",m,"$"+(0,s.zw)(F.currency(t.origin_price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",b," $"+(0,s.zw)(F.currency(t.price)),1)):(0,a.kq)("",!0),t.price!=t.origin_price?((0,a.wg)(),(0,a.iD)("p",f," $"+(0,s.zw)(F.currency(t.origin_price)),1)):(0,a.kq)("",!0)]),(0,a._)("td",_,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:(0,o.iM)((e=>F.addToCart(t.id,1)),["prevent"])},w,8,k)]),(0,a._)("td",x,[(0,a._)("button",{type:"button",class:"btn d-md-block mx-auto btnShop",onClick:(0,o.iM)((e=>F.removeFavorite(t.id)),["prevent"])},$,8,S)])])))),128))])])])):((0,a.wg)(),(0,a.iD)("div",P,D))],64)}i(6699);var I=i(1325),q=i(3714),Z={data(){return{favorite:I.Z.getFavorite()||[],favoriteProduct:[],isLoading:!1,status:{loadingItem:""}}},inject:["$httpMessageState","emitter"],methods:{currency:q.A,getFavoriteProduct(){this.$http.get("https://vue3-course-api.hexschool.io/api/yuanyuan1103/products/all").then((t=>{t.data.success?this.favoriteProduct=t.data.products.filter((t=>this.favorite.includes(t.id))):this.$httpMessageState(t,"取得全部產品資料")})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))},removeFavorite(t){this.isLoading=!0,this.favorite.splice(this.favorite.indexOf(t),1),this.$httpMessageState({data:{success:!0,message:`已將 ${t.title} 移除收藏`}},"移除收藏"),I.Z.saveFavorite(this.favorite),this.emitter.emit("update-favorite"),this.isLoading=!1,this.getFavoriteProduct()},updateFavorite(){this.favorite=I.Z.getFavorite()},addToCart(t,e){const i="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart",a={product_id:t,qty:e};this.status.loadingItem=t,this.$http.post(i,{data:a}).then((e=>{e.data.success?(this.status.loadingItem="",this.qty=1,this.emitter.emit("update-cart",t),this.$httpMessageState(e,"加入購物車")):this.$httpMessageState(e,"加入購物車")})).catch((t=>{this.$httpMessageState(t,"連線錯誤")}))}},created(){this.getFavoriteProduct()},mounted(){this.emitter.on("update-favorite",this.updateFavorite),this.getFavoriteProduct()}},z=i(89);const L=(0,z.Z)(Z,[["render",M],["__scopeId","data-v-f79625d2"]]);var N=L}}]);
//# sourceMappingURL=202.970a0147.js.map