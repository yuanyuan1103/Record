"use strict";(self["webpackChunkrecord"]=self["webpackChunkrecord"]||[]).push([[575],{6575:function(t,e,a){a.r(e),a.d(e,{default:function(){return xt}});var s=a(3396),i=a(9242),l=a(7139);const d=t=>((0,s.dD)("data-v-7d2a7e9b"),t=t(),(0,s.Cn)(),t),c=d((()=>(0,s._)("div",{class:"box"},null,-1))),n={class:"container-fluid h100"},o=(0,s.uE)('<div class="checkCart pt-5" data-v-7d2a7e9b><div class="stepAct border" data-v-7d2a7e9b><i class="bi bi-bag-check" data-v-7d2a7e9b></i><span class="border-top" data-v-7d2a7e9b>確認清單</span></div><i class="bi bi-caret-right-fill" data-v-7d2a7e9b></i><div class="step border border-secondary" data-v-7d2a7e9b><i class="bi bi-card-list" data-v-7d2a7e9b></i><span class="border-top" data-v-7d2a7e9b>填寫資料</span></div><i class="bi bi-caret-right" data-v-7d2a7e9b></i><div class="step border border-secondary" data-v-7d2a7e9b><i class="bi bi-credit-card" data-v-7d2a7e9b></i><span class="border-top" data-v-7d2a7e9b>確認付款</span></div></div>',1),r={class:"pt-5"},u={key:0,class:"row"},p={class:"col-12 col-lg-8 mb-4"},b={class:"border"},h={key:0,class:"container-fluid mt-4"},_={class:"table table-hover align-middle align-middle"},m=d((()=>(0,s._)("thead",null,[(0,s._)("tr",{class:"align-middle text-sm text-gray-400"},[(0,s._)("th",{scope:"col"},"品項"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell",width:"24%"},"數量"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell text-center"},"總計"),(0,s._)("th",{scope:"col",class:"d-none d-md-table-cell text-center"},"刪除")])],-1))),v={class:"d-flex align-items-center flex-column flex-sm-row"},g={class:"d-md-none p-2"},y=["disabled","onClick"],k=d((()=>(0,s._)("i",{class:"bi bi-x-circle h4"},null,-1))),f=[k],C=["src","alt","title"],x={class:"ms-3 text-start py-4"},w={class:"h5"},$={key:0,class:"h5"},q={class:"text-decoration-line-through text-muted h6"},M=d((()=>(0,s._)("br",null,null,-1))),D={key:1,class:"h5"},I={class:"d-md-none"},L={class:"input-group"},z=["onClick","disabled"],N=d((()=>(0,s._)("i",{class:"bi bi-dash"},null,-1))),T=[N],U=["onUpdate:modelValue"],V=["onClick","disabled"],S=d((()=>(0,s._)("i",{class:"bi bi-plus"},null,-1))),H=[S],W={class:"d-none d-md-table-cell text-end align-middle"},Y={class:"input-group"},j=["onClick","disabled"],A=d((()=>(0,s._)("i",{class:"bi bi-dash"},null,-1))),E=[A],K=["onUpdate:modelValue"],Z=["onClick","disabled"],B=d((()=>(0,s._)("i",{class:"bi bi-plus"},null,-1))),F=[B],G={class:"d-none d-md-table-cell text-end h5 py-5"},J={class:"d-none d-md-table-cell text-end"},O=["disabled","onClick"],P=d((()=>(0,s._)("i",{class:"bi bi-x-circle h4"},null,-1))),Q=[P],R={key:1,class:"container-fluid mt-4"},X={class:"text-center"},tt=d((()=>(0,s._)("i",{class:"bi bi-cart4 display-1 fw-bold text-dark"},null,-1))),et=d((()=>(0,s._)("h3",{class:"p-3"},"目前購物車還沒有商品唷",-1))),at=(0,s.Uk)("選購商品"),st={class:"col-12 col-lg-4 mb-4"},it={class:"border p-6"},lt={class:""},dt=d((()=>(0,s._)("span",{class:"text-sm text-gray-400 mr-4"},"商品總計",-1))),ct={class:"fs-4"},nt=d((()=>(0,s._)("div",{class:"py-4"},[(0,s._)("span",{class:"text-sm text-gray-400 mr-4"},"運費"),(0,s._)("span",{class:"fs-4"},"NT$0")],-1))),ot={class:"border-top py-4"},rt=d((()=>(0,s._)("span",{class:"text-sm text-gray-400 mr-4"},null,-1))),ut={class:"input-group mb-3"},pt=d((()=>(0,s._)("div",{class:"border-top py-4"},[(0,s._)("span",{class:"text-sm text-gray-400 mr-4"},"總金額")],-1))),bt={key:0},ht={class:"fs-2 fw-bolder"},_t={key:1},mt={class:"text-decoration-line-through text-muted fs-5"},vt={class:"fs-2 fw-bolder"},gt=["disabled"];function yt(t,e,a,d,k,N){const S=(0,s.up)("Loading"),A=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(S,{active:k.isLoading},null,8,["active"]),c,(0,s._)("div",n,[o,(0,s._)("div",r,[k.cart.carts?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",p,[(0,s._)("div",b,[k.cart.carts.length?((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("table",_,[m,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(k.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id},[(0,s._)("td",v,[(0,s._)("div",g,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",disabled:k.status.loadingItem===e.id,onClick:(0,i.iM)((t=>N.removeCartItem(e.id)),["prevent"])},f,8,y)]),(0,s._)("img",{class:"productImg",src:e.product.imageUrl,alt:e.product.title,title:e.product.title},null,8,C),(0,s._)("div",x,[(0,s._)("div",w,(0,l.zw)(e.product.title),1),e.product.origin_price!=e.product.price?((0,s.wg)(),(0,s.iD)("div",$,[(0,s._)("span",q,"NT$"+(0,l.zw)(t.$filters.currency(e.product.origin_price)),1),M,(0,s.Uk)("NT$"+(0,l.zw)(t.$filters.currency(e.product.price)),1)])):(0,s.kq)("",!0),e.product.origin_price==e.product.price?((0,s.wg)(),(0,s.iD)("div",D," NT$"+(0,l.zw)(t.$filters.currency(e.product.price)),1)):(0,s.kq)("",!0),(0,s._)("div",I,[(0,s._)("div",L,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:(0,i.iM)((t=>N.updateCart(e,e.qty-1)),["prevent"]),disabled:1==e.qty},T,8,z),(0,s.wy)((0,s._)("input",{type:"number",min:"1","onUpdate:modelValue":t=>e.qty=t,class:"form-control form-control-sm text-center border-dark bg-transparent",readonly:""},null,8,U),[[i.nr,e.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:(0,i.iM)((t=>N.updateCart(e,e.qty+1)),["prevent"]),disabled:10==e.qty},H,8,V)])])])]),(0,s._)("td",W,[(0,s._)("div",Y,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:(0,i.iM)((t=>N.updateCart(e,e.qty-1)),["prevent"]),disabled:1==e.qty},E,8,j),(0,s.wy)((0,s._)("input",{type:"number",min:"1","onUpdate:modelValue":t=>e.qty=t,class:"form-control form-control-sm text-center border-dark bg-transparent",readonly:""},null,8,K),[[i.nr,e.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:(0,i.iM)((t=>N.updateCart(e,e.qty+1)),["prevent"]),disabled:10==e.qty},F,8,Z)])]),(0,s._)("td",G,"NT$"+(0,l.zw)(t.$filters.currency(e.total)),1),(0,s._)("td",J,[(0,s._)("button",{type:"button",class:"btn d-md-block mx-auto btnClose",disabled:k.status.loadingItem===e.id,onClick:(0,i.iM)((t=>N.removeCartItem(e.id)),["prevent"])},Q,8,O)])])))),128))])])])):((0,s.wg)(),(0,s.iD)("div",R,[(0,s._)("div",X,[tt,et,(0,s.Wm)(A,{to:"/product",class:"btn btn-outline-dark btn-lg mb-5"},{default:(0,s.w5)((()=>[at])),_:1})])]))])]),(0,s._)("div",st,[(0,s._)("div",it,[(0,s._)("div",lt,[dt,(0,s._)("span",ct,"NT$"+(0,l.zw)(t.$filters.currency(k.cart.total)),1)]),nt,(0,s._)("div",ot,[rt,(0,s._)("div",ut,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control",placeholder:"請輸入優惠碼","onUpdate:modelValue":e[0]||(e[0]=t=>k.coupon_code=t)},null,512),[[i.nr,k.coupon_code]]),(0,s._)("button",{type:"button",class:"btn btn-outline-secondary",onClick:e[1]||(e[1]=(0,i.iM)(((...t)=>N.addCouponCode&&N.addCouponCode(...t)),["prevent"]))}," 套用優惠碼 ")])]),pt,k.cart.final_total==k.cart.total?((0,s.wg)(),(0,s.iD)("div",bt,[(0,s._)("p",ht,"NT$"+(0,l.zw)(t.$filters.currency(k.cart.total)),1)])):(0,s.kq)("",!0),k.cart.final_total!==k.cart.total?((0,s.wg)(),(0,s.iD)("div",_t,[(0,s._)("span",mt,"NT$"+(0,l.zw)(t.$filters.currency(k.cart.total)),1),(0,s._)("p",vt,"NT$"+(0,l.zw)(t.$filters.currency(k.cart.final_total)),1)])):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:"btn btn-dark w-100",onClick:e[2]||(e[2]=(0,i.iM)(((...t)=>N.gotocheckinfo&&N.gotocheckinfo(...t)),["prevent"])),disabled:!k.cart.carts.length}," 填寫資料 ",8,gt)])])])):(0,s.kq)("",!0)])])],64)}var kt={data(){return{isLoading:!1,cart:{},status:{loadingItem:""},coupon_code:""}},inject:["$httpMessageState","emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1}))},removeCartItem(t){const e=`https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart/${t}`;this.isLoading=!0,this.$http.delete(e).then((e=>{this.$httpMessageState(e,"移除購物車品項"),this.status.loadingItem="",this.emitter.emit("update-cart",t),this.getCart(),this.isLoading=!1}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/yuanyuan1103/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},updateCart(t,e){const a=`https://vue3-course-api.hexschool.io/api/yuanyuan1103/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:e};this.$http.put(a,{data:s}).then((t=>{this.$httpMessageState(t,"更新購物車"),this.status.loadingItem="",this.getCart()}))},gotocheckinfo(){this.$router.push("/checkinfo")}},created(){this.getCart()}},ft=a(89);const Ct=(0,ft.Z)(kt,[["render",yt],["__scopeId","data-v-7d2a7e9b"]]);var xt=Ct}}]);
//# sourceMappingURL=575.c82f2718.js.map