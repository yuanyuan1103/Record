{"version":3,"file":"js/927.d0cf3805.js","mappings":"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","sources":["webpack://record/./src/methods/saveFavorite.js","webpack://record/./src/views/frontend/Favorite.vue","webpack://record/./src/views/frontend/Favorite.vue?2449"],"sourcesContent":["export default {\n  saveFavorite (favorite) {\n    const favoriteStr = JSON.stringify(favorite)\n    localStorage.setItem('favoriteProduct', favoriteStr)\n  },\n  getFavorite () {\n    return JSON.parse(localStorage.getItem('favoriteProduct'))\n  }\n}\n","<template>\n  <Loading :active=\"isLoading\" />\n  <div class=\"position-relative bg-cover\">\n    <div class=\"favoritebanner\">\n      <h2 class=\"position-absolute h2 fw-bold favoritebanner-text\">喜愛清單</h2>\n    </div>\n  </div>\n  <div class=\"container mt-4 h100\" v-if=\"favoriteProduct.length\">\n    <table class=\"table table-striped table-hover align-middle\">\n      <thead>\n        <tr class=\"text-center align-middle bgcolor\">\n          <th scope=\"col\" class=\"d-none d-sm-block border-bottom-0\"></th>\n          <th scope=\"col\">名稱</th>\n          <th scope=\"col\">金額</th>\n          <th scope=\"col\">加入購物車</th>\n          <th scope=\"col\">刪除</th>\n        </tr>\n      </thead>\n      <tbody class=\"align-middle text-center\">\n        <tr class=\"align-middle\" v-for=\"item in favoriteProduct\" :key=\"item.id\">\n          <td class=\"align-middle d-none d-sm-block\">\n            <img class=\"productImg\" :src=\"item.imageUrl\" :alt=\"item.title\" :title=\"item.title\" />\n          </td>\n          <td class=\"align-middle h4 fw-bold\">{{ item.title }}</td>\n          <td class=\"align-middle\">\n            <p v-if=\"item.price == item.origin_price\" class=\"fs-5 m-0 fw-bold\">${{ currency(item.origin_price) }}</p>\n            <p v-if=\"!(item.price == item.origin_price)\" class=\"text-danger fw-bold m-0 fs-5\">\n              ${{ currency(item.price) }}\n            </p>\n            <p v-if=\"!(item.price == item.origin_price)\" class=\"text-decoration-line-through m-0 text-muted fs-6\">\n              ${{ currency(item.origin_price) }}\n            </p>\n          </td>\n          <td class=\"align-middle\">\n            <button type=\"button\" class=\"btn d-md-block mx-auto btnShop\" @click.prevent=\"addToCart(item.id, 1)\">\n              <i class=\"bi bi-cart-plus-fill h4\"></i>\n            </button>\n          </td>\n          <td class=\"align-middle\">\n            <button type=\"button\" class=\"btn d-md-block mx-auto btnShop\" @click.prevent=\"removeFavorite(item.id)\">\n              <i class=\"bi bi-trash h4\"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class=\"container-fluid d-flex justify-content-center align-items-center h100\" v-else>\n    <div class=\"text-center\">\n      <i class=\"bi bi-bag-heart display-1 fw-bold text-dark\"></i>\n      <h3 class=\"p-3\">目前喜愛清單還沒有商品唷</h3>\n      <router-link to=\"/product\" class=\"btn btn-outline-dark btn-lg mb-5\">來去逛逛</router-link>\n    </div>\n  </div>\n</template>\n\n<script>\nimport saveFavorite from '@/methods/saveFavorite'\nimport { currency } from '@/methods/filters'\n\nexport default {\n  data() {\n    return {\n      favorite: saveFavorite.getFavorite() || [],\n      favoriteProduct: [],\n      isLoading: false,\n      status: {\n        loadingItem: ''\n      }\n    }\n  },\n  inject: ['$httpMessageState', 'emitter'],\n  methods: {\n    currency,\n    getFavoriteProduct() {\n      this.isLoading = true\n      this.$http\n        .get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((response) => {\n          if (!response.data.success) {\n            this.$httpMessageState(response, '取得全部產品資料')\n            this.isLoading = false\n            return\n          }\n          this.isLoading = false\n          this.favoriteProduct = response.data.products.filter((product) => this.favorite.includes(product.id))\n        })\n        .catch((error) => {\n          this.isLoading = false\n          this.$httpMessageState(error, '連線錯誤')\n        })\n    },\n    removeFavorite(itemId) {\n      this.isLoading = true\n      this.favorite.splice(this.favorite.indexOf(itemId), 1)\n      this.$httpMessageState(\n        {\n          data: {\n            success: true,\n            message: `已將 ${itemId.title} 移除收藏`\n          }\n        },\n        '移除收藏'\n      )\n      saveFavorite.saveFavorite(this.favorite)\n      this.emitter.emit('update-favorite')\n      this.isLoading = false\n      this.getFavoriteProduct()\n    },\n    updateFavorite() {\n      this.favorite = saveFavorite.getFavorite()\n    },\n    addToCart(id, qty) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      const data = {\n        product_id: id,\n        qty\n      }\n      this.status.loadingItem = id\n      this.$http\n        .post(api, { data })\n        .then((response) => {\n          if (!response.data.success) {\n            this.$httpMessageState(response, '加入購物車')\n            return\n          }\n          this.status.loadingItem = ''\n          this.qty = 1\n          this.emitter.emit('update-cart', id)\n          this.$httpMessageState(response, '加入購物車')\n        })\n        .catch((error) => {\n          this.$httpMessageState(error, '連線錯誤')\n        })\n    }\n  },\n  created() {\n    this.getFavoriteProduct()\n  },\n  mounted() {\n    this.emitter.on('update-favorite', this.updateFavorite)\n    this.getFavoriteProduct()\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import '../../assets/helpers/_Favorite.scss';\n</style>\n","import { render } from \"./Favorite.vue?vue&type=template&id=a7a2d4a8&scoped=true\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport \"./Favorite.vue?vue&type=style&index=0&id=a7a2d4a8&scoped=true&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\Yuan\\\\Desktop\\\\Vue\\\\record\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a7a2d4a8\"]])\n\nexport default __exports__"],"names":["saveFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","_createElementVNode","class","scope","_hoisted_15","_hoisted_19","_createVNode","_component_Loading","active","$data","_hoisted_1","length","_createElementBlock","_hoisted_4","_Fragment","_renderList","item","key","id","src","imageUrl","alt","title","_toDisplayString","price","origin_price","$options","type","onClick","_hoisted_23","_hoisted_24","_component_router_link","to","data","favoriteProduct","isLoading","status","loadingItem","inject","methods","currency","getFavoriteProduct","this","$http","get","then","response","success","$httpMessageState","products","filter","product","includes","catch","error","removeFavorite","itemId","splice","indexOf","message","emitter","emit","updateFavorite","addToCart","qty","api","product_id","post","created","mounted","on","__exports__","render"],"sourceRoot":""}