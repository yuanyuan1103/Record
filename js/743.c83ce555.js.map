{"version":3,"file":"js/743.c83ce555.js","mappings":"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","sources":["webpack://record/./src/components/Pagination.vue","webpack://record/./src/components/Pagination.vue?33dc","webpack://record/./src/views/backend/Products.vue","webpack://record/./src/components/ProductModal.vue","webpack://record/./src/components/ProductModal.vue?b0ff","webpack://record/./src/views/backend/Products.vue?306b"],"sourcesContent":["<template>\n  <div>\n    <nav aria-label=\"Page navigation\">\n      <ul class=\"pagination justify-content-end pt-4\">\n        <li class=\"page-item\" :class=\"{ disabled: pages.current_page == 1 }\">\n          <a class=\"page-link\" @click.prevent=\"updatePage(pages.current_page - 1)\">\n            <i :class=\"pages.current_page == 1 ? 'bi-caret-left-fill' : 'bi-caret-left'\" class=\"bi\"></i>\n          </a>\n        </li>\n        <li\n          v-for=\"page in pages.total_pages\"\n          :key=\"page\"\n          class=\"page-item\"\n          :class=\"{ active: pages.current_page == page }\"\n        >\n          <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(page)\">{{ page }}</a>\n        </li>\n        <li class=\"page-item\" :class=\"{ disabled: pages.current_page == pages.total_pages }\">\n          <a class=\"page-link\" href=\"#\" @click.prevent=\"updatePage(pages.current_page + 1)\">\n            <span aria-hidden=\"true\"\n              ><i\n                :class=\"pages.current_page == pages.total_pages ? 'bi-caret-right-fill' : 'bi-caret-right'\"\n                class=\"bi\"\n              ></i\n            ></span>\n          </a>\n        </li>\n      </ul>\n    </nav>\n  </div>\n</template>\n<script>\n// :pages=\"{ 頁碼資訊 }\"\n// @emitPages=\"更新頁面事件\"\nexport default {\n  // props: ['pages'],\n  props: {\n    pages: {\n      type: Object,\n      default: () => ({\n        total_pages: 1,\n        current_page: 1,\n        has_pre: false,\n        has_next: false\n      })\n    }\n  },\n  watch: {\n    // pages() {\n    //   console.log(this.pages);\n    // }\n  },\n  methods: {\n    updatePage(page) {\n      this.$emit('emit-pages', page);\n    }\n  }\n};\n</script>\n","import { render } from \"./Pagination.vue?vue&type=template&id=3ec02129\"\nimport script from \"./Pagination.vue?vue&type=script&lang=js\"\nexport * from \"./Pagination.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Yuan\\\\Desktop\\\\Vue\\\\record\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <Loading :active=\"isLoading\" />\r\n  <div class=\"text-end\">\r\n    <button type=\"button\" class=\"btn btn-primary\" @click=\"openModal(true)\">增加一個產品</button>\r\n  </div>\r\n  <table class=\"table mt-4\">\r\n    <thead>\r\n      <tr>\r\n        <th width=\"120\">分類</th>\r\n        <th>產品名稱</th>\r\n        <th width=\"120\">原價</th>\r\n        <th width=\"120\">售價</th>\r\n        <th width=\"100\">是否啟用</th>\r\n        <th width=\"200\">編輯</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      <tr v-for=\"item in products\" :key=\"item.id\">\r\n        <td>{{ item.category }}</td>\r\n        <td>{{ item.title }}</td>\r\n        <td class=\"text-right\">\r\n          {{ currency(item.origin_price) }}\r\n        </td>\r\n        <td class=\"text-right\">\r\n          {{ currency(item.price) }}\r\n        </td>\r\n        <td>\r\n          <span class=\"text-success\" v-if=\"item.is_enabled\">啟用</span>\r\n          <span class=\"text-muted\" v-else>未啟用</span>\r\n        </td>\r\n        <td>\r\n          <div class=\"btn-group\">\r\n            <!-- 將v-for內的item帶入 -->\r\n            <button type=\"button\" class=\"btn btn-outline-primary btn-sm\" @click=\"openModal(false, item)\">編輯</button>\r\n            <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"openDelProductModal(item)\">刪除</button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </tbody>\r\n  </table>\r\n  <!-- 分頁資訊 -->\r\n  <Pagination :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\r\n  <!-- 把tempProduct傳進product 內層使用:product接收-->\r\n  <ProductModal ref=\"productModal\" :product=\"tempProduct\" @update-product=\"updateProduct\"></ProductModal>\r\n\r\n  <DelModal :item=\"tempProduct\" ref=\"delModal\" @del-item=\"delProduct\" />\r\n</template>\r\n\r\n<script>\r\n//將寫好的ProductModal載入\r\nimport ProductModal from '@/components/ProductModal.vue';\r\nimport DelModal from '@/components/DelModal.vue';\r\nimport Pagination from '@/components/Pagination.vue';\r\nimport { currency } from '@/methods/filters';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      products: [],\r\n      pagination: {},\r\n      //外層的tempProduct透過props傳進product\r\n      tempProduct: {},\r\n      //判斷是否為新增的狀態\r\n      isNew: false,\r\n      //判斷是否要有過場動畫\r\n      isLoading: false\r\n    };\r\n  },\r\n  //區域註冊\r\n  components: {\r\n    ProductModal,\r\n    DelModal,\r\n    Pagination\r\n  },\r\n  //只要使用inject就可使用 且不需要import\r\n  inject: ['$httpMessageState', 'emitter'],\r\n  methods: {\r\n    currency,\r\n    getProducts(page = 1) {\r\n      //跟文件對應的api路徑\r\n      // const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products`;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/products/?page=${page}`;\r\n      //因讀取資料 故使用過場效果\r\n      this.isLoading = true;\r\n      this.$http.get(api).then((res) => {\r\n        //若已讀取完成 則將讀取效果關閉\r\n        this.isLoading = false;\r\n        if (res.data.success) {\r\n          this.products = res.data.products;\r\n          this.pagination = res.data.pagination;\r\n        }\r\n      });\r\n    },\r\n    //開啟modal\r\n    openModal(isNew, item) {\r\n      //假設是新增 isNew為true 將空的product帶入\r\n      if (isNew) {\r\n        this.tempProduct = {};\r\n      } else {\r\n        //假設為isNew為false 則將原本的item帶入空的product\r\n        this.tempProduct = { ...item };\r\n      }\r\n      //將狀態存入\r\n      this.isNew = isNew;\r\n      const productComponent = this.$refs.productModal;\r\n      productComponent.showModal();\r\n    },\r\n    //編輯更新product\r\n    updateProduct(item) {\r\n      this.isLoading = true;\r\n      this.tempProduct = item;\r\n      //若為新增則執行以下\r\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product`;\r\n      //新增使用的方法 post\r\n      let httpMethod = 'post';\r\n      // 為非新增的狀態 也就是編輯\r\n      if (!this.isNew) {\r\n        //跟文件對應的api路徑 用item的id取得資料\r\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${item.id}`;\r\n        //編輯使用的方法 put\r\n        httpMethod = 'put';\r\n      }\r\n      const productComponent = this.$refs.productModal;\r\n      this.$http[httpMethod](api, { data: this.tempProduct }).then((response) => {\r\n        this.isLoading = false;\r\n        productComponent.hideModal();\r\n        //加入吐司\r\n        this.$httpMessageState(response, '修改產品成功');\r\n        this.isLoading = false;\r\n      });\r\n    },\r\n    // 開啟刪除 Modal\r\n    openDelProductModal(item) {\r\n      this.tempProduct = { ...item };\r\n      const delComponent = this.$refs.delModal;\r\n      delComponent.showModal();\r\n    },\r\n    //刪除資料\r\n    delProduct() {\r\n      this.isLoading = true;\r\n      //取得api路徑\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/product/${this.tempProduct.id}`;\r\n      //實作刪除\r\n      this.$http.delete(url).then((response) => {\r\n        this.isLoading = false;\r\n        //關閉刪除 Modal\r\n        const delComponent = this.$refs.delModal;\r\n        delComponent.hideModal();\r\n        //重新取得產品資料\r\n        this.getProducts();\r\n      });\r\n    }\r\n  },\r\n  created() {\r\n    this.getProducts();\r\n  }\r\n};\r\n</script>\r\n","<template>\n  <!-- Modal -->\n  <div\n    class=\"modal fade\"\n    id=\"exampleModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"exampleModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\" role=\"document\">\n      <div class=\"modal-content border-0\">\n        <div class=\"modal-header bg-dark text-white\">\n          <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n            <span>新增產品</span>\n          </h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-4\">\n              <div class=\"mb-3\">\n                <label for=\"image\" class=\"form-label\">輸入圖片網址</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"image\"\n                  placeholder=\"請輸入圖片連結\"\n                  v-model=\"tempProduct.imageUrl\"\n                />\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"customFile\" class=\"form-label\"\n                  >或 上傳圖片\n                  <i class=\"fas fa-spinner fa-spin\"></i>\n                </label>\n                <!-- 有變更就觸發事件uploadFile ref取得DOM元素-->\n                <input type=\"file\" id=\"customFile\" class=\"form-control\" ref=\"fileInput\" @change=\"uploadFile\" />\n              </div>\n              <img class=\"img-fluid\" alt=\"\" />\n              <!-- 延伸技巧，多圖 -->\n              <div class=\"mt-5\">\n                <div class=\"mb-3 input-group\">\n                  <input type=\"url\" class=\"form-control form-control\" placeholder=\"請輸入連結\" />\n                  <button type=\"button\" class=\"btn btn-outline-danger\">移除</button>\n                </div>\n                <div>\n                  <button type=\"button\" class=\"btn btn-outline-primary btn-sm d-block w-100\">新增圖片</button>\n                </div>\n              </div>\n            </div>\n            <div class=\"col-sm-8\">\n              <div class=\"mb-3\">\n                <label for=\"title\" class=\"form-label\">標題</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"title\"\n                  placeholder=\"請輸入標題\"\n                  v-model=\"tempProduct.title\"\n                />\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"category\" class=\"form-label\">分類</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"category\"\n                    placeholder=\"請輸入分類\"\n                    v-model=\"tempProduct.category\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label\">單位</label>\n                  <input\n                    type=\"text\"\n                    class=\"form-control\"\n                    id=\"unit\"\n                    placeholder=\"請輸入單位\"\n                    v-model=\"tempProduct.unit\"\n                  />\n                </div>\n              </div>\n\n              <div class=\"row gx-2\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"origin_price\" class=\"form-label\">原價</label>\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    id=\"origin_price\"\n                    placeholder=\"請輸入原價\"\n                    v-model=\"tempProduct.origin_price\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"price\" class=\"form-label\">售價</label>\n                  <input\n                    type=\"number\"\n                    class=\"form-control\"\n                    id=\"price\"\n                    placeholder=\"請輸入售價\"\n                    v-model=\"tempProduct.price\"\n                  />\n                </div>\n              </div>\n              <hr />\n\n              <div class=\"mb-3\">\n                <label for=\"description\" class=\"form-label\">產品描述</label>\n                <textarea\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"description\"\n                  placeholder=\"請輸入產品描述\"\n                  v-model=\"tempProduct.description\"\n                ></textarea>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"content\" class=\"form-label\">說明內容</label>\n                <textarea\n                  type=\"text\"\n                  class=\"form-control\"\n                  id=\"content\"\n                  placeholder=\"請輸入產品說明內容\"\n                  v-model=\"tempProduct.content\"\n                ></textarea>\n              </div>\n              <div class=\"mb-3\">\n                <div class=\"form-check\">\n                  <input\n                    class=\"form-check-input\"\n                    type=\"checkbox\"\n                    v-model=\"tempProduct.is_enabled\"\n                    :true-value=\"1\"\n                    :false-value=\"0\"\n                    id=\"is_enabled\"\n                  />\n                  <label class=\"form-check-label\" for=\"is_enabled\"> 是否啟用 </label>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-outline-secondary\" data-bs-dismiss=\"modal\">取消</button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('update-product', tempProduct)\">確認</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n//將bootstrap的modal載入\nimport Modal from 'bootstrap/js/dist/modal';\nimport modalMixin from '@/mixins/modalMixin';\n\nexport default {\n  props: {\n    // 內層使用:product接收\n    product: {\n      type: Object,\n      default() {\n        return {};\n      }\n    }\n  },\n  mixins: [modalMixin],\n  //監聽事件是否有變更 把傳入的資料傳進tempProduct\n  watch: {\n    product() {\n      this.tempProduct = this.product;\n    }\n  },\n  data() {\n    return {\n      modal: {},\n      //接收外層的資料\n      tempProduct: {}\n    };\n  },\n  methods: {\n    uploadFile() {\n      //從console.dir(uploadedFile);找到files屬性 確認為陣列第0個資料\n      const uploadedFile = this.$refs.fileInput.files[0];\n      //確認資料是否有取得\n      // console.dir(uploadedFile);\n\n      //轉為fromData的格式\n      const formData = new FormData();\n      //file-to-upload表單內容\n      formData.append('file-to-upload', uploadedFile);\n\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/admin/upload`;\n\n      this.$http.post(url, formData).then((response) => {\n        //確認資料上傳的結果\n        // console.log(response.data);\n        //若成功將資料存進tempProduct\n        if (response.data.success) {\n          this.tempProduct.imageUrl = response.data.imageUrl;\n        }\n      });\n    }\n  },\n  mounted() {\n    // var myModal = new bootstrap.Modal(document.getElementById('myModal'), options)\n    this.modal = new Modal(this.$refs.modal);\n    // this.modal.show();\n  }\n};\n</script>\n","import { render } from \"./ProductModal.vue?vue&type=template&id=5464c178\"\nimport script from \"./ProductModal.vue?vue&type=script&lang=js\"\nexport * from \"./ProductModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Yuan\\\\Desktop\\\\Vue\\\\record\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./Products.vue?vue&type=template&id=775d7217\"\nimport script from \"./Products.vue?vue&type=script&lang=js\"\nexport * from \"./Products.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Yuan\\\\Desktop\\\\Vue\\\\record\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","disabled","$props","current_page","onClick","$options","_Fragment","_renderList","total_pages","page","key","active","href","_hoisted_3","props","pages","type","Object","default","has_pre","has_next","watch","methods","updatePage","this","$emit","__exports__","render","width","_createVNode","_component_Loading","$data","item","id","_toDisplayString","category","title","origin_price","price","is_enabled","_hoisted_9","_hoisted_10","_component_Pagination","onEmitPages","_component_ProductModal","ref","product","onUpdateProduct","_component_DelModal","onDelItem","tabindex","role","for","_hoisted_4","placeholder","imageUrl","$event","_hoisted_11","onChange","_hoisted_12","_hoisted_16","_hoisted_19","_hoisted_21","unit","_hoisted_24","_hoisted_26","_hoisted_27","_hoisted_29","description","_hoisted_31","content","_hoisted_34","_hoisted_36","_ctx","mixins","modalMixin","tempProduct","data","modal","uploadFile","uploadedFile","$refs","fileInput","files","formData","FormData","append","url","$http","post","then","response","success","mounted","Modal","products","pagination","isNew","isLoading","components","ProductModal","DelModal","Pagination","inject","currency","getProducts","api","get","res","openModal","productComponent","productModal","showModal","updateProduct","httpMethod","hideModal","$httpMessageState","openDelProductModal","delComponent","delModal","delProduct","delete","created"],"sourceRoot":""}