{"version":3,"file":"js/434.a01307a1.js","mappings":"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","sources":["webpack://record/./src/methods/saveFavorite.js","webpack://record/./src/views/Favorite.vue","webpack://record/./src/views/Favorite.vue?b54f"],"sourcesContent":["export default {\n  saveFavorite(favorite) {\n    const favoriteStr = JSON.stringify(favorite);\n    localStorage.setItem('favoriteProduct', favoriteStr);\n  },\n  getFavorite() {\n    return JSON.parse(localStorage.getItem('favoriteProduct'));\n  }\n};\n","<template>\n  <Loading :active=\"isLoading\"></Loading>\n  <div class=\"position-relative bg-cover\">\n    <div class=\"favoritebanner\">\n      <h2 class=\"position-absolute text-hv-center h2 fw-bold favoritebanner-text\">喜愛清單</h2>\n    </div>\n  </div>\n  <div class=\"container mt-4 h100\" v-if=\"favoriteProduct.length\">\n    <table class=\"table table-striped table-hover align-middle\">\n      <thead>\n        <tr class=\"text-center align-middle bgcolor\">\n          <th scope=\"col\" class=\"d-none d-sm-block border-bottom-0\"></th>\n          <th scope=\"col\">名稱</th>\n          <th scope=\"col\">金額</th>\n          <th scope=\"col\">加入購物車</th>\n          <th scope=\"col\">刪除</th>\n        </tr>\n      </thead>\n      <tbody class=\"align-middle text-center\">\n        <tr class=\"align-middle\" v-for=\"item in favoriteProduct\" :key=\"item.id\">\n          <td class=\"align-middle d-none d-sm-block\">\n            <img class=\"productImg\" :src=\"item.imageUrl\" />\n          </td>\n          <td class=\"align-middle h4 fw-bold\">{{ item.title }}</td>\n          <td class=\"align-middle\">\n            <p v-if=\"item.price == item.origin_price\" class=\"fs-5 m-0 fw-bold\">${{ currency(item.origin_price) }}</p>\n            <p v-if=\"!(item.price == item.origin_price)\" class=\"text-danger fw-bold m-0 fs-5\">\n              ${{ currency(item.price) }}\n            </p>\n            <p v-if=\"!(item.price == item.origin_price)\" class=\"text-decoration-line-through m-0 text-muted fs-6\">\n              ${{ currency(item.origin_price) }}\n            </p>\n          </td>\n          <td class=\"align-middle\">\n            <button type=\"button\" class=\"btn d-md-block mx-auto btnShop\" @click.prevent=\"addToCart(item.id, 1)\">\n              <i class=\"bi bi-cart-plus-fill h4\"></i>\n            </button>\n          </td>\n          <td class=\"align-middle\">\n            <button type=\"button\" class=\"btn d-md-block mx-auto btnShop\" @click.prevent=\"removeFavorite(item.id)\">\n              <i class=\"bi bi-trash h4\"></i>\n            </button>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class=\"container-fluid d-flex justify-content-center align-items-center h100\" v-else>\n    <div class=\"text-center\">\n      <i class=\"bi bi-bag-heart display-1 fw-bold text-dark\"></i>\n      <h3 class=\"p-3\">目前喜愛清單還沒有商品唷</h3>\n      <a href=\"#/product\" class=\"btn btn-dark btn-lg mb-5\">Shop Now</a>\n    </div>\n  </div>\n</template>\n<style src=\"../assets/helpers/_Favorite.css\" scoped></style>\n<script>\nimport saveFavorite from '@/methods/saveFavorite';\nimport { currency } from '../methods/filters';\n\nexport default {\n  data() {\n    return {\n      favorite: saveFavorite.getFavorite() || [],\n      favoriteProduct: [],\n      isLoading: false,\n      status: {\n        loadingItem: '' //對應品項id\n      }\n    };\n  },\n  inject: ['$httpMessageState', 'emitter'],\n  methods: {\n    currency,\n    getFavoriteProduct() {\n      this.isLoading = true;\n      this.$http\n        .get(`${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`)\n        .then((response) => {\n          if (!response.data.success) {\n            this.$httpMessageState(response, '取得全部產品資料');\n            this.isLoading = false;\n            return;\n          }\n          this.isLoading = false;\n          this.favoriteProduct = response.data.products.filter((product) => this.favorite.includes(product.id));\n        })\n        .catch((error) => {\n          this.isLoading = false;\n          this.$httpMessageState(error, '連線錯誤');\n        });\n    },\n    removeFavorite(itemId) {\n      this.isLoading = true;\n      this.favorite.splice(this.favorite.indexOf(itemId), 1);\n      this.$httpMessageState(\n        {\n          data: {\n            success: true,\n            message: `已將 ${itemId.title} 移除收藏`\n          }\n        },\n        '移除收藏'\n      );\n      saveFavorite.saveFavorite(this.favorite);\n      this.emitter.emit('update-favorite');\n      this.isLoading = false;\n      this.getFavoriteProduct();\n    },\n    updateFavorite() {\n      this.favorite = saveFavorite.getFavorite();\n    },\n    addToCart(id, qty) {\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      const data = {\n        product_id: id,\n        qty\n      };\n      this.status.loadingItem = id;\n      this.$http\n        .post(api, { data })\n        .then((response) => {\n          if (!response.data.success) {\n            this.$httpMessageState(response, '加入購物車');\n            return;\n          }\n          this.status.loadingItem = '';\n          this.qty = 1;\n          this.emitter.emit('update-cart', id);\n          this.$httpMessageState(response, '加入購物車');\n        })\n        .catch((error) => {\n          this.$httpMessageState(error, '連線錯誤');\n        });\n    }\n  },\n  created() {\n    this.getFavoriteProduct();\n  },\n  mounted() {\n    this.emitter.on('update-favorite', this.updateFavorite);\n    this.getFavoriteProduct();\n  }\n};\n</script>\n","import { render } from \"./Favorite.vue?vue&type=template&id=5f1fbd0d&scoped=true\"\nimport script from \"./Favorite.vue?vue&type=script&lang=js\"\nexport * from \"./Favorite.vue?vue&type=script&lang=js\"\n\nimport \"../assets/helpers/_Favorite.css?vue&type=style&index=0&id=5f1fbd0d&scoped=true&lang=css\"\n\nimport exportComponent from \"C:\\\\Users\\\\Yuan\\\\Desktop\\\\Vue\\\\record\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5f1fbd0d\"]])\n\nexport default __exports__"],"names":["saveFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","_createElementVNode","class","scope","_hoisted_15","_hoisted_19","href","_hoisted_22","_createVNode","_component_Loading","active","$data","_hoisted_1","length","_createElementBlock","_hoisted_4","_Fragment","_renderList","item","key","id","src","imageUrl","_toDisplayString","title","price","origin_price","$options","type","onClick","_hoisted_23","data","favoriteProduct","isLoading","status","loadingItem","inject","methods","currency","getFavoriteProduct","this","$http","get","then","response","success","$httpMessageState","products","filter","product","includes","catch","error","removeFavorite","itemId","splice","indexOf","message","emitter","emit","updateFavorite","addToCart","qty","api","product_id","post","created","mounted","on","__exports__","render"],"sourceRoot":""}